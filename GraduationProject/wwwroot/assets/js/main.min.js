$(document).ready(function(){$(".owl-carousel").owlCarousel({loop:!0,nav:!1,responsive:{0:{items:1},1e3:{items:1}},dots:!1});const n=document.querySelectorAll("input");n.forEach(n=>{n.addEventListener("blur",n=>{n.target.value?n.target.classList.add("dirty"):n.target.classList.remove("dirty")})})});const hiddenInputId=document.querySelector("#hidenInputId"),hiddenInputName=document.querySelector("#hidenInputName"),hiddenInputTime=document.querySelector("#hidenInputTime"),seatsOfRow=document.querySelectorAll(".row .seat");if(hiddenInputId!==null&&hiddenInputName!==null&&hiddenInputTime!==null&&seatsOfRow!==null){let t=hiddenInputId.value,i=hiddenInputName.value,r=hiddenInputTime.value,n=JSON.parse(localStorage.getItem("busket"))!==null?JSON.parse(localStorage.getItem("busket")):[];if(n.length>0)for(let i=0;i<n.length;i++)if(t===n[i].concertId)for(let t=0;t<seatsOfRow.length;t++){let r=seatsOfRow[t].getAttribute("data-seatId");if(n[i].seatId===r){seatsOfRow[t].classList.add("selected");break}}for(let u=0;u<seatsOfRow.length;u++)seatsOfRow[u].addEventListener("click",function(){if(this.classList.contains("seat")&&!this.classList.contains("sold"))if(this.classList.contains("selected")){alert("Ticket removed from basket");this.classList.remove("selected");this.removeAttribute("data-id");let i=this.getAttribute("data-seatId");const t=n.filter(n=>n.seatId!==i);n=t;localStorage.setItem("busket",JSON.stringify(t))}else{alert("Ticket added to basket");this.classList.add("selected");let u=t+""+this.getAttribute("data-seatId");const f=[...n,{concertId:t,seatId:this.getAttribute("data-seatId"),ticketIdent:u,concertName:i,concertDate:r}];n=f;localStorage.setItem("busket",JSON.stringify(n));this.setAttribute("data-id",u)}})}let datas=JSON.parse(localStorage.getItem("busket"))!==null?JSON.parse(localStorage.getItem("busket")):[];$("#buytickets").attr("href","/concerts/buytickets?ticketdata="+localStorage.getItem("busket"));let busketWrapper=document.querySelector("#busket-wrapper");if(datas.length>0)for(let n=0;n<datas.length;n++){let u=7,y=Math.ceil(datas[n].seatId/u),p=datas[n].seatId%u!=0?datas[n].seatId%u:u,i=document.createElement("div"),s=document.createElement("div"),r=document.createElement("box"),f=document.createElement("div"),e=document.createElement("div"),o=document.createElement("div"),a=document.createElement("p"),h=document.createElement("p"),c=document.createElement("p"),v=document.createElement("p"),l=document.createElement("a"),t=document.createElement("a");i.classList.add("col-md-12");i.classList.add("mt-2");i.classList.add("mb-2");s.classList.add("card-box");r.classList.add("box");f.classList.add("box-up");e.classList.add("box-middle");o.classList.add("box-down");c.classList.add("distance-left");h.classList.add("distance-left");t.classList.add("distance-left");t.setAttribute("href","#");t.setAttribute("data-id",datas[n].ticketIdent);l.setAttribute("href","#");a.innerHTML=`<strong>Row Number: </strong> ${y}`;h.innerHTML=`<strong>Seat Number: </strong> ${p}`;c.innerHTML=`<strong>Concert Name: </strong> ${datas[n].concertName}`;v.innerHTML=`<strong>Concert Date: </strong> ${datas[n].concertDate}`;t.innerText="Remove busket";l.innerText="View concert";busketWrapper.append(i);i.append(s);s.append(r);r.append(f);r.append(e);r.append(o);f.append(a);f.append(h);e.append(c);e.append(v);o.append(t);o.append(l);t.addEventListener("click",function(){let n=this.getAttribute("data-id"),t=datas.filter(t=>t.ticketIdent!==n);localStorage.setItem("busket",JSON.stringify(t));window.location.reload()})}else{let n=document.createElement("div"),t=document.createElement("p");n.classList.add("col-md-12");t.classList.add("not_found_text");t.innerText="Not found data in your busket";n.append(t);busketWrapper.append(n)}